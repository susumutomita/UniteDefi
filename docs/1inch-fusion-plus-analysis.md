# 1inch Fusion+ 技術分析レポート

## 概要

1inch Fusion+は従来のアトミックスワップを改良したインテントベースのクロスチェインスワッププロトコルです。
Dutch Auction（ダッチオークション）とプロフェッショナルなResolver（リゾルバー）システムを組み合わせています。

## 核心的イノベーション

### 1. インテントベースアプローチ

- Maker（ユーザー）: 注文に署名するだけで、その後は受動的
- Resolver（リゾルバー）: KYC済みの専門的なトレーダー/マーケットメーカー
- Relayer（リレイヤー）: 1inchサービスがMakerとResolverを調整

### 2. Dutch Auction メカニズム

```bash
価格 = 開始価格 - (時間経過 × 減少率)
```

- 時間とともに価格が下がり、リゾルバーにとって利益が出る時点で約定
- 価格発見: 複数のリゾルバーが競争
- 部分約定: 大口注文を複数のリゾルバーが分割実行

### 3. 4フェーズプロセス

#### Phase 1: アナウンス

1. MakerがFusion+注文とシークレットハッシュに署名
2. RelayerがすべてのResolverに注文を共有、Dutch Auction開始

#### Phase 2: デポジット

3. Resolverがソースチェインのエスクローに預金
4. Resolverがデスティネーションチェインのエスクローに預金

#### Phase 3: 引き出し

5. Relayerが両方のエスクロー作成を確認後、シークレットを開示
6. Resolverがシークレットを使ってソースチェインから引き出し
7. Resolverが同じシークレットでデスティネーションチェインから引き出し

#### Phase 4: リカバリー（オプション）

8-9. タイムアウト時の資金返却処理。

## 高度な技術要素

### 部分約定とMerkle Tree

- N+1シークレット: 注文をN個に分割し、各部分に対応するシークレット
- Merkle Tree: シークレットを効率的に管理
- 段階的実行: 25、50、75、100の段階的約定

### 複数Timelockシステム

- Finality Lock: チェインリオーガナイゼーション対策
- Exclusive Period: 実行リゾルバーの優先期間
- Cancellation Period: 失敗時の資金回収期間

### Safety Deposit

- リゾルバーが追加担保を預金
- 取引完了/キャンセル実行者が報酬として受領
- インセンティブメカニズム

## 従来のAtomic Swapとの違い

| 項目 | 従来のAtomic Swap | 1inch Fusion+ |
|------|------------------|---------------|
| UX | 両当事者が能動的参加 | Makerは署名のみ |
| 価格発見 | 事前合意 | Dutch Auction |
| 実行者 | P2P | プロフェッショナルResolver |
| 部分約定 | 不可 | 可能 |
| ガス最適化 | なし | 動的価格調整 |
| 信頼性 | 技術的信頼のみ | KYC済みResolver |

# 1inch Fusion+ ハッカソン分析

## 1inchの現状と課題

### 現在の1inch対応状況
- EVMチェイン: 完全対応
  - Ethereum, BSC, Polygon, Arbitrumなど
- 非EVMチェイン:  未対応
  - Solana (最近対応開始)
  - NEAR, Cosmos, Aptos, Suiなど

### なぜ非EVM対応が重要か
1. 市場機会の損失: 非EVMチェインの巨大な取引量を逃している
2. 競合優位性: Jupiter (Solana)などチェイン特化型DEXに市場を奪われている
3. ユーザー体験: ユーザーはチェインごとに異なるDEXを使う必要がある

## ハッカソンの狙い

### 1. 実現可能性の検証
1inchは以下を知りたい。
- 各非EVMチェインでFusion+のコア機能は実装可能か
- チェイン固有の制約は何か
- どのような技術的工夫が必要か

### 2. 実装パターンの発見
- NEAR: Rustベースの高速実行環境での実装
- Cosmos: IBC対応のクロスチェイン実装
- Aptos: Move言語での最適化

### 3. 人材とアイデアの発掘
- 優秀な開発者の発見
- 革新的な実装アプローチの収集
- 将来の本番実装への知見蓄積

## Fusion+の本質的価値

### 通常のブリッジとの違い
```text
通常のブリッジ: ユーザー → ロック → 待機 → アンロック。

Fusion+。
- インテントベース（「ETHをNEARに変えたい」と宣言するだけ）
- 競争的価格発見（複数リゾルバーの競争）
- MEV保護
- ガスレス取引
- 部分約定対応
```

## 実装戦略

### 最小要件（必須）
- EVM ↔ NEARの基本的なクロスチェインスワップ
- HTLC（ハッシュロック＋タイムロック）の実装
- CLIでのデモ動作

#### 1. NEARネイティブのインテントシステム
```rust
pub struct Intent {
    want_token: TokenId,
    have_token: TokenId,
    amount: U128,
    min_return: U128,
    deadline: Timestamp,
}
```

#### 2. リゾルバー競争メカニズム
- 複数のリゾルバーが最良レートを競う
- オンチェインでの透明な価格発見

#### 3. NEAR特有の最適化
- シャーディング活用: 並列実行による高速化
- 低ガス代: EVMより安いトランザクションコスト
- Aurora統合: EVM ↔ NEAR ↔ Auroraの三角スワップ

#### 4. 実装のポイント
- Fusion+のUXをNEARで完全再現
- チェイン特性を活かした独自の改善
- スケーラビリティと拡張性の実証

## まとめ
1inchは単なるブリッジではなく、各非EVMチェインでFusion+をネイティブに動かすための最適解を探している。

ハッカソンの目的は。
- 実現可能性の検証
- 実装コストの把握
- 優秀な人材の発掘
- 本番実装への知見収集

我々の実装は、NEARでFusion+と同等以上の体験を実現し、1inchに「これならNEARでもFusion+が動く」と確信させることが目標。